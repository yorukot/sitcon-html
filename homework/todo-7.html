<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>æˆ‘çš„ä»£è¾¦äº‹é …</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Huninn&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Huninn", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #fff;
        font-size: 16px;
        line-height: 1.6;
        padding: 20px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 40px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .main-title {
        text-align: center;
        font-weight: 700;
        font-size: clamp(28px, 5vw, 48px);
        margin-bottom: 40px;
        background: linear-gradient(135deg, #fff, #a8edea);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .section-title {
        color: #fff;
        font-weight: 600;
        font-size: 24px;
        margin: 30px 0 20px 0;
        position: relative;
        padding-left: 20px;
      }

      .section-title::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 24px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 2px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        color: #fff;
        font-weight: 500;
        font-size: 16px;
        margin-bottom: 8px;
        display: block;
      }

      .form-input {
        font-family: "Huninn", sans-serif;
        font-size: 16px;
        color: #fff;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        padding: 15px 20px;
        width: 100%;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .form-input:focus {
        outline: none;
        border-color: rgba(255, 255, 255, 0.5);
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .form-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: #fff;
        font-family: "Huninn", sans-serif;
        font-size: 16px;
        font-weight: 600;
        border: none;
        border-radius: 12px;
        padding: 15px 30px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        margin-top: 10px;
      }

      .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .btn-primary:hover::before {
        left: 100%;
      }

      .btn-primary:active {
        transform: translateY(0);
      }

      .todo-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
      }

      .todo-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
      }

      .todo-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        background: rgba(255, 255, 255, 0.15);
      }

      .todo-item label {
        display: flex;
        align-items: flex-start;
        font-size: 18px;
        font-weight: 500;
        cursor: pointer;
        line-height: 1.5;
      }

      .todo-item input[type="checkbox"] {
        margin-right: 15px;
        margin-top: 2px;
        width: 20px;
        height: 20px;
        accent-color: #667eea;
        cursor: pointer;
      }

      .delete-btn {
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 8px 16px;
        font-size: 14px;
        cursor: pointer;
        margin-left: auto;
        margin-top: 10px;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .delete-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
      }

      .completed-item {
        background: rgba(78, 205, 196, 0.1);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        transition: all 0.3s ease;
        border: 1px solid rgba(78, 205, 196, 0.3);
        position: relative;
        overflow: hidden;
      }

      .completed-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(135deg, #4ecdc4, #00b894);
      }

      .completed-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(78, 205, 196, 0.2);
        background: rgba(78, 205, 196, 0.15);
      }

      .completed-item label {
        display: flex;
        align-items: flex-start;
        font-size: 18px;
        font-weight: 500;
        cursor: pointer;
        line-height: 1.5;
        color: #4ecdc4;
        text-decoration: line-through;
        opacity: 0.8;
      }

      .completed-item input[type="checkbox"] {
        margin-right: 15px;
        margin-top: 2px;
        width: 20px;
        height: 20px;
        accent-color: #4ecdc4;
        cursor: pointer;
      }

      .divider {
        height: 2px;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        border: none;
        margin: 40px 0;
      }

      .card {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 25px;
        backdrop-filter: blur(10px);
        min-height: 120px;
      }

      .empty-state {
        text-align: center;
        color: rgba(255, 255, 255, 0.6);
        font-style: italic;
        padding: 40px 20px;
      }

      @media (max-width: 768px) {
        .container {
          padding: 20px;
          margin: 10px;
        }
        
        .form-input {
          padding: 12px 16px;
        }
        
        .btn-primary {
          width: 100%;
          padding: 15px;
        }
      }

      /* æ»¾å‹•æ¢ç¾åŒ– */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #5a67d8, #6b46c1);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="main-title">æˆ‘çš„å¾…è¾¦æ¸…å–®</h1>

      <hr class="divider">

      <h3 class="section-title">æ–°å¢å¾…è¾¦äº‹é …</h3>
      
      <div class="form-group">
        <label class="form-label">æ–°çš„å¾…è¾¦äº‹é …ï¼š</label>
        <input type="text" id="todoInput" class="form-input" placeholder="è¼¸å…¥æ–°çš„å¾…è¾¦äº‹é …" />
      </div>

      <div class="form-group">
        <label class="form-label">ç‹€æ…‹ï¼š</label>
        <select class="form-input">
          <option value="true">å·²å®Œæˆ</option>
          <option value="false">æœªå®Œæˆ</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">å‚™è¨»ï¼š</label>
        <textarea rows="3" class="form-input" placeholder="è¼¸å…¥è©³ç´°å‚™è¨»"></textarea>
      </div>
      
      <button type="button" id="addBtn" class="btn-primary" onclick="createTodo()">
        âœ¨ æ–°å¢å¾…è¾¦äº‹é …
      </button>

      <hr class="divider">

      <h3 class="section-title">å¾…å®Œæˆäº‹é …</h3>
      <div class="card">
        <ol id="todoList">
          <div class="empty-state">ğŸ“‹ è¼‰å…¥ä¸­...</div>
        </ol>
      </div>

      <hr class="divider">

      <h3 class="section-title">å·²å®Œæˆäº‹é …</h3>
      <div class="card">
        <ul id="completedList">
          <div class="empty-state">ğŸ“‹ è¼‰å…¥ä¸­...</div>
        </ul>
      </div>
    </div>
  </body>
    <script>
    const API_URL = "http://localhost:8000";

    // è¼‰å…¥å¾…è¾¦äº‹é …
    async function loadTodos() {
      try {
        const response = await fetch(`${API_URL}/todos`);
        const data = await response.json();
        
        // åˆ†é›¢å·²å®Œæˆå’Œæœªå®Œæˆçš„é …ç›®
        const incompleteTodos = data.filter(todo => !todo.completed);
        const completedTodos = data.filter(todo => todo.completed);
        
        // æ¸²æŸ“æœªå®Œæˆçš„é …ç›®
        let todoHtml = "";
        if (incompleteTodos.length === 0) {
          todoHtml = '<div class="empty-state">ğŸ‰ å¤ªæ£’äº†ï¼æ²’æœ‰å¾…è¾¦äº‹é …äº†ï¼</div>';
        } else {
          incompleteTodos.forEach((todo) => {
            todoHtml += `
            <li class="todo-item">
              <label>
                <input type="checkbox" onchange="completeTodo(${todo.id}, '${todo.title}')" />
                ${todo.title}
              </label>
              <button class="delete-btn" onclick="deleteTodo(${todo.id})">ğŸ—‘ï¸ åˆªé™¤</button>
            </li>`;
          });
        }
        document.getElementById('todoList').innerHTML = todoHtml;
        
        // æ¸²æŸ“å·²å®Œæˆçš„é …ç›®
        let completedHtml = "";
        if (completedTodos.length === 0) {
          completedHtml = '<div class="empty-state">ğŸ¯ é‚„æ²’æœ‰å®Œæˆçš„äº‹é …ï¼ŒåŠ æ²¹ï¼</div>';
        } else {
          completedTodos.forEach((todo) => {
            completedHtml += `
            <li class="completed-item">
              <label>
                <input type="checkbox" checked onchange="uncompleteTodo(${todo.id}, '${todo.title}')" />
                âœ… ${todo.title}
              </label>
              <button class="delete-btn" onclick="deleteTodo(${todo.id})">ğŸ—‘ï¸ åˆªé™¤</button>
            </li>`;
          });
        }
        document.getElementById('completedList').innerHTML = completedHtml;
        
      } catch (error) {
        console.error('è¼‰å…¥å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
        document.getElementById('todoList').innerHTML = '<div class="empty-state">âŒ ç„¡æ³•è¼‰å…¥å¾…è¾¦äº‹é …</div>';
        document.getElementById('completedList').innerHTML = '<div class="empty-state">âŒ ç„¡æ³•è¼‰å…¥å·²å®Œæˆäº‹é …</div>';
      }
    }

    // æ–°å¢å¾…è¾¦äº‹é …
    async function createTodo() {
      const input = document.getElementById('todoInput');
      const title = input.value.trim();

      if (title) {
        try {
          await fetch(`${API_URL}/todo`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ title: title, completed: false })
          });

          input.value = '';
          loadTodos();
        } catch (error) {
          console.error('æ–°å¢å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
          alert('æ–°å¢å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨é€£ç·š');
        }
      } else {
        alert('è«‹è¼¸å…¥å¾…è¾¦äº‹é …å…§å®¹');
      }
    }

    // å®Œæˆå¾…è¾¦äº‹é …
    async function completeTodo(id, title) {
      try {
        await fetch(`${API_URL}/todo/${id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title: title, completed: true })
        });
        loadTodos();
      } catch (error) {
        console.error('å®Œæˆå¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
        alert('æ“ä½œå¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨é€£ç·š');
      }
    }

    // å–æ¶ˆå®Œæˆå¾…è¾¦äº‹é …
    async function uncompleteTodo(id, title) {
      try {
        await fetch(`${API_URL}/todo/${id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title: title, completed: false })
        });
        loadTodos();
      } catch (error) {
        console.error('å–æ¶ˆå®Œæˆå¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
        alert('æ“ä½œå¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨é€£ç·š');
      }
    }

    // åˆªé™¤å¾…è¾¦äº‹é …
    async function deleteTodo(id) {
      if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹å¾…è¾¦äº‹é …å—ï¼Ÿ')) {
        try {
          await fetch(`${API_URL}/todo/${id}`, {
            method: 'DELETE'
          });
          loadTodos();
        } catch (error) {
          console.error('åˆªé™¤å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
          alert('åˆªé™¤å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨é€£ç·š');
        }
      }
    }

    // é é¢è¼‰å…¥æ™‚è‡ªå‹•è¼‰å…¥å¾…è¾¦äº‹é …
    document.addEventListener('DOMContentLoaded', function() {
      loadTodos();
    });

    // æŒ‰ Enter éµæ–°å¢å¾…è¾¦äº‹é …
    document.getElementById('todoInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        createTodo();
      }
    });
  </script>
</html>
